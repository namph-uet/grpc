syntax = "proto3";
option java_multiple_files = true;
option java_generic_services = true;
option java_package = "web.service.grpc";

message RegistrationRequestGrpc{
    string email = 1;
    string password = 3;
}
message RegistrationResponseGrpc{
    string email = 1;
    string password = 2;
    string status = 3;
}
message ConfirmEmailRequest{
    string token = 1;
}
message ConfirmEmailResponse{
    string status = 1;
    string email = 2;
}
message PasswordResetRequest{
    string email = 1;
}
message PasswordResetResponse{
    string status = 1;
    string email = 2;
}
message RegistrationInformationRequest{
    string email = 1;
    string userName = 2;
    string phone = 3;
}
message RegistrationInformationResponse{
    string status = 1;
}
message LoginRequest{
    string email = 1;
    string password = 2;
}
message LoginResponse{
    string status = 1;
    string token = 2;
}

message NewPasswordRequest{
    string token = 1;
    string newPassword = 2;
    string newPasswordConfirm = 3;
}

message NewPasswordResponse{
    string email = 1;
    string status = 2;
}

message VerificationResetPasswordTokenRequest{
    string token = 1;
}
message VerificationResetPasswordTokenResponse{
    string email = 1;
    string status = 2;
}
service UserService{

    // create a new account, save new email, password and send verification email
    rpc Registration (RegistrationRequestGrpc) returns (RegistrationResponseGrpc);

    // login account
    rpc Login (LoginRequest) returns (LoginResponse);

    // Verify email
    rpc VerificationTokenRegistration (ConfirmEmailRequest) returns (ConfirmEmailResponse);

    // send reset password email
    rpc PasswordForgot(PasswordResetRequest) returns (PasswordResetResponse);

    // save new password
    rpc PasswordReset (NewPasswordRequest) returns (NewPasswordResponse);

    // register account's information
    rpc RegistrationInformation (RegistrationInformationRequest) returns (RegistrationInformationResponse);

    // verify reset password token
    rpc VerificationResetPasswordToken (VerificationResetPasswordTokenRequest)
        returns (VerificationResetPasswordTokenResponse);
}

